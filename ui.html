<!-- ui.html -->
<div>
  <button id="copyButton">ðŸ“‹ Copy Variables</button>
</div>

<style>
  div {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
  }
  button {
    padding: 10px 20px;
    border-radius: 5px;
    border: none;
    background-color: #facc15;
    color: black;
    font-size: 16px;
    font-weight: 600;
  }
</style>

<script>
function copyToClipboard(text) {
  // Create textarea element
  const textArea = document.createElement('textarea');
  textArea.style.position = 'fixed';
  textArea.style.left = '-9999px';
  textArea.value = text;
  
  // Add to DOM
  document.body.appendChild(textArea);
  
  // Select and copy
  textArea.select();
  document.execCommand('copy');
  
  // Clean up
  document.body.removeChild(textArea);
}

window.onmessage = async (event) => {
  if (event.data.pluginMessage.type === 'copy') {
    const text = event.data.pluginMessage.text;
    copyToClipboard(text);
    
    // Show feedback
    const button = document.getElementById('copyButton');
    button.textContent = 'âœ… Copied!';
    setTimeout(() => {
      button.textContent = 'ðŸ“‹ Copy Variables';
    }, 2000);
  }
}

document.getElementById('copyButton').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'copy-variables' } }, '*');
}
</script>